---
title: "Data Cleaning"
author: "David Sutton"
date: "2/19/2020"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(readr)
library(tidyverse)
library(haven)
library(janitor)
library(rvest)
load("~/CCES.RData")
ANES <- read_dta("C:/Users/david/Downloads/ANES.dta")
```


```{r, echo = FALSE}

# Cleaning CCES Data. First, 2008-2012 Presidential switchers:

pres12 <- CCES_Panel_Full3waves_VV_V4 %>%
  filter(CC10_317 < 3, CC12_410a < 3, CC10_317 != CC12_410a)

# then, House of R 2010-2012;

house12 <- CCES_Panel_Full3waves_VV_V4 %>%
  filter(CC10_412 < 3, CC12_412 < 3, CC10_412 != CC12_412)

# then, House of Rep 2012-2014.

house14 <- CCES_Panel_Full3waves_VV_V4 %>%
  filter(CC12_412 < 3, CC14_412 < 3, CC12_412 != CC14_412)

# Now, writing code to drop variables we don't want/keep variables we want, filter a couple variables, and creating an "Age" column.

house12_vars <- house12 %>%
  subset(select = c(birthyr_12, gender_12, race_12, CC10_412, CC12_412, CC12_302, CC12_303d, CC12_308a, CC12_308b, CC12_315a, CC12_320, CC12_321, CC12_322_1:CC12_322_6, CC12_324:CC12_329, CC12_341A, CC12_341C:CC12_341F, CC12_341M, CC12_350, CC12_367, CC12_387_1:CC12_387_13, CC12_418aa, CC12_422a:CC12_423bb, pid7_12, pid3_12, ideo5_12, pew_prayer_12, religpew_12, faminc_12, educ_12)) %>%
  filter(CC12_303d < 5, pid7_12 < 9) %>%
  mutate("Age" = (2012 - birthyr_12))
```




